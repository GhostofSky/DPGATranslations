<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>{{ site.title }}{% if page.title and page.title != "" %} &mdash; {{ page.title }}{% endif %}</title>

    {% if site.description %}<meta name="description" content="{{ site.description }}">{% endif %}  

    <link rel="stylesheet" href="{{ '/assets/css/main.css' | absolute_url }}?{{ site.time | date: '%s%N' }}">

    <link rel="apple-touch-icon" href="{{ site.icon }}">

    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}
    <script>
      var isDarkmode = {{ page.darkmode | default: false }};
      var isDarkmode = localStorage.getItem("isDarkmode") === "true";
      document.documentElement.style.setProperty("--bg-color", !isDarkmode ? "#F7F3E9":"black"); 
      document.documentElement.style.setProperty("--text-c", !isDarkmode ? "black":"white");
      document.documentElement.style.setProperty("--post-color", !isDarkmode ? "white":"black"); 
    </script>
  </head>
  <body>

    {% if page.layout == 'home' %}
      <a href="#main" class="skip-navigation">
        Skip to list of posts
      </a>
    {% else %}
      <a href="#main" class="skip-navigation">
        Skip to content
      </a>
    {% endif %}
    
{% if site.data.menu and site.paginate and site.paginate_path and paginator.page > 1 %}
  {% include menu.html %}
{% elsif site.paginate and site.paginate_path and paginator.page > 1 %}
  {% include back-link.html %}
{% else %}
  <header class="site-masthead">
    {% include menu.html %}
    {% if site.title %}
      <h1>
        {{ site.title }}
      </h1>
    {% endif %}
    {{ content }}
  </header>
{% endif %}

<main class="home" id="main" role="main" aria-label="Content">
  <h1 class="content-title divided">
    {% if site.paginate and site.paginate_path and paginator.page > 1 %}
      Page {{ paginator.page }}
    {% else %}
      Contents
    {% endif %}
  </h1>
    {% include search_reuploads.html %}
  {% if false %}
    
    <ul class="post-list">
      {% for post in paginator.posts %}
        {% include post-list-item.html %}
      {% endfor %}
    </ul>

    {% if paginator.total_pages > 1 %}

      <div class="post-pagination">
        {% if paginator.next_page %}
          <a href="{{ paginator.next_page_path | prepend: site.baseurl  }}" class="pagination-next btn">&lang;&nbsp;Older</a>
        {% else %}
          <span>&nbsp;</span>
        {% endif %}
        <span class="pagination-number">{{ paginator.page }} of {{ paginator.total_pages }}</span>
        {% if paginator.previous_page %}
          <a href="{{ paginator.previous_page_path | prepend: site.baseurl }}" class="pagination-previous btn">Newer&nbsp;&rang;</a>
        {% else %}
          <span>&nbsp;</span>
        {% endif %}
      </div>

    {% endif %}

  {% else %}
    {% assign stuff = site.reuploads | sort: "chapter" %}
    <ul class="post-list">
      {% for chapter in stuff %}
        {% include post-list-item.html %}
      {% endfor %}
    </ul>
  
  {% endif %}
    

</main>

{% unless site.hide_search %}
{% include search_reuploads.html %}
{% endunless %}

{% include menu.html %}

{% unless site.hide_credits %}
<aside class="site-credits">
</aside>
{% endunless %}

</body>
</html>